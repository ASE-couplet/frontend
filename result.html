<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PoemScape</title>
    <style>
        @font-face{
            font-family: "logo_en";
            src: url('/static/fonts/logo_en.TTF') format('truetype');
        }
        @font-face{
            font-family: "text";
            src: url('/static/fonts/text.TTF') format('truetype');
        }
        div{
            text-align: center;
            width: 100%;
        }
    </style>
    <link rel="stylesheet" href="/static/css/bootstrap.css">
    <link rel="stylesheet" href="/static/css/text.css">
    <link rel="stylesheet" href="/static/css/base-min.css">
    <script src="/static/js/jquery-1.11.3.min.js"></script>
    <script src="/static/js/bootstrap.js"></script>
    <script src="/static/js/vue.js"></script>
    <script src="/static/js/axios.min.js"></script>
</head>

<body style="background-color: #f7f6f4">

    <div id="outcome">
        {{ message }}
    </div>

    <script>
        app = new Vue({
            el:'#outcome',
            data: {
                message: "Waiting",
            },
        });
        let order_id = window.location.pathname.slice(1);
        function getOutcome() {
            axios.get('/api/result', {
                params: {
                    id: order_id,
                },
            })
            .then(function (response) {
                console.log(response);
                app.message = response.poem;
            })
            .catch(function (error) {
                console.log(error);
                app.message = "Error.";
                // alert("Server Error.");
            });
        }
        setInterval("getOutcome()", "500");
    </script>

</body>
</html>